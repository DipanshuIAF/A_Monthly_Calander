import calendar
import tkinter as tk
from tkinter import ttk
from tkinter import messagebox

class CalendarApp:
    def __init__(self, root):
        self.root = root
        self.root.title("Monthly Calendar with Reminders")
        self.year = 2024
        self.month = 1
        self.reminders = {}

        self.calendar_frame = tk.Frame(self.root)
        self.calendar_frame.pack(fill="both", expand=True)

        self.calendar_label = tk.Label(self.calendar_frame, text="", font=("Arial", 12))
        self.calendar_label.pack(fill="x")

        self.month_year_label = tk.Label(self.calendar_frame, text="", font=("Arial", 12))
        self.month_year_label.pack(fill="x")

        self.reminder_label = tk.Label(self.calendar_frame, text="Reminders:", font=("Arial", 12))
        self.reminder_label.pack(fill="x")

        self.reminder_listbox = tk.Listbox(self.calendar_frame, width=20)
        self.reminder_listbox.pack(fill="both", expand=True)

        self.button_frame = tk.Frame(self.root)
        self.button_frame.pack(fill="x")

        self.prev_button = tk.Button(self.button_frame, text="Previous", command=self.prev_month)
        self.prev_button.pack(side="left")

        self.next_button = tk.Button(self.button_frame, text="Next", command=self.next_month)
        self.next_button.pack(side="left")

        self.add_reminder_button = tk.Button(self.button_frame, text="Add Reminder", command=self.add_reminder)
        self.add_reminder_button.pack(side="left")

        self.delete_reminder_button = tk.Button(self.button_frame, text="Delete Reminder", command=self.delete_reminder)
        self.delete_reminder_button.pack(side="left")

        self.update_calendar()

    def update_calendar(self):
        self.calendar_label.config(text=calendar.month(self.year, self.month))
        self.month_year_label.config(text=f"{calendar.month_name[self.month]} {self.year}")
        self.reminder_listbox.delete(0, tk.END)
        for day, reminder in self.reminders.get((self.year, self.month), {}).items():
            self.reminder_listbox.insert(tk.END, f"{day}: {reminder}")

    def prev_month(self):
        if self.month == 1:
            self.month = 12
            self.year -= 1
        else:
            self.month -= 1
        self.update_calendar()

    def next_month(self):
        if self.month == 12:
            self.month = 1
            self.year += 1
        else:
            self.month += 1
        self.update_calendar()

    def add_reminder(self):
        reminder_window = tk.Toplevel(self.root)
        reminder_window.title("Add Reminder")

        day_label = tk.Label(reminder_window, text="Day:")
        day_label.pack()
        day_entry = tk.Entry(reminder_window)
        day_entry.pack()

        reminder_label = tk.Label(reminder_window, text="Reminder:")
        reminder_label.pack()
        reminder_entry = tk.Entry(reminder_window)
        reminder_entry.pack()

        def save_reminder():
            day = int(day_entry.get())
            reminder = reminder_entry.get()
            if (self.year, self.month) not in self.reminders:
                self.reminders[(self.year, self.month)] = {}
            self.reminders[(self.year, self.month)][day] = reminder
            self.update_calendar()
            reminder_window.destroy()

        save_button = tk.Button(reminder_window, text="Save", command=save_reminder)
        save_button.pack()

    def delete_reminder(self):
        selected_index = self.reminder_listbox.curselection()
        if selected_index:
            selected_reminder = self.reminder_listbox.get(selected_index)
            day = int(selected_reminder.split(":")[0])
            if (self.year, self.month) in self.reminders:
                if day in self.reminders[(self.year, self.month)]:
                    del self.reminders[(self.year, self.month)][day]
                    self.update_calendar()

if __name__ == "__main__":
    root = tk.Tk()
    app = CalendarApp(root)
    root.mainloop()
